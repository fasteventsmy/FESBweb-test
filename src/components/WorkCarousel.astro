---
import WorkCard from "./WorkCard.astro";
const modules = import.meta.glob("../../content/work/*.json", { eager: true });
const items = Object.values(modules).map(m=>m.default).filter(Boolean)
  .sort((a,b)=> new Date(b.date||"") - new Date(a.date||"")).slice(0,10);
---
<section id="work" class="container">
  <h2>Our Work</h2>
  <div class="scroll-x">
    {items.map(i => (
      <div class="scroll-snap-align:start">
        <WorkCard title={i.title} thumbnail={i.thumbnail} />
      </div>
    ))}
    {items.length > 0
      ? (<article class="card" style="display:grid;place-items:center;min-height:100%">
           <a href="/work" class="button button--mint">See more of our work</a>
         </article>)
      : (<article class="card" style="display:grid;place-items:center;min-height:100%">
           <a href="/work" class="button button--mint">Add your first project</a>
         </article>)
    }
  </div>
</section>
