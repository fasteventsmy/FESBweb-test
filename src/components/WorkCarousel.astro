import WorkCard from "./WorkCard.astro";
const modules = import.meta.glob("../../content/work/*.json", { eager: true });
const items = Object.values(modules)
  .map((m:any) => m.default || m)
  .filter(Boolean)
  .sort((a:any,b:any) => new Date(b.date).getTime() - new Date(a.date).getTime())
  .slice(0,10);
---
<section id="work" style="max-width:1100px;margin:0 auto;padding:3rem 1rem; position:relative;">
  <h2>Our Work</h2>
  <div style="display:grid; grid-auto-flow:column; grid-auto-columns:minmax(260px, 1fr); overflow-x:auto; gap:1rem; padding-bottom:1rem; scroll-snap-type:x mandatory;">
    {(items.length ? items : []).map((i:any) => (
      <div style="scroll-snap-align:start"><WorkCard title={i.title} thumbnail={i.thumbnail} /></div>
    ))}
    <div style="scroll-snap-align:start">
      <article class="card" style="display:grid;place-items:center;min-height:100%;">
        <a href="/work" class="button button--mint">See more of our work</a>
      </article>
    </div>
  </div>
</section>
