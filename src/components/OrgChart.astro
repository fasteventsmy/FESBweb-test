---
import Image from "./Image.astro";

interface Person{ name:string; role:string; dept:string; photo?:string }
const { people } = Astro.props as { people: Person[] };
const groups = people.reduce((m:any,p)=>{ (m[p.dept]=m[p.dept]||[]).push(p); return m; },{});
---
<div class="grid gap-8">
  {Object.entries(groups).map(([dept, list]: any) => (
    <section>
      <h3 class="text-xl font-bold mb-3">{dept}</h3>
      <div class="grid sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-4">
        {list.map((p: any) => (
          <div class="p-4 rounded" style="background:var(--card)">
            <Image src={p.photo} alt={p.name} class="w-16 h-16 rounded-full object-cover mb-3" width="64" height="64" />
            <div class="font-semibold">{p.name}</div>
            <div class="text-sm" style="color:var(--muted)">{p.role}</div>
          </div>
        ))}
      </div>
    </section>
  ))}
</div>
