---
import "../styles/base.css";
import Footer from "../components/Footer.astro";
import Image from "../components/Image.astro";

const { title = "Fast Events" } = Astro.props;

const current = Astro.url.pathname;
const isActive = (href: string) => (current === href ? "active" : "");

const debugEnabled = import.meta.env.PUBLIC_DEBUG === "1";
const commitSha =
  import.meta.env.VERCEL_GIT_COMMIT_SHA ??
  import.meta.env.GITHUB_SHA ??
  "";
const shortCommitSha = commitSha ? commitSha.slice(0, 7) : "unknown";
---
<html lang="en">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width,initial-scale=1" />
    <title>{title}</title>
    <link rel="preconnect" href="https://fonts.googleapis.com" />
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
    <link rel="stylesheet" href="/src/styles/theme-concept-c.css" />
  </head>
  <body>
    <header class="site-header">
      <div class="container">
        <a href="/" class="brand">
          <Image src="/assets/fast-logo-black.svg" alt="Fast Events" width="120" height="28" class="brand-logo" />
        </a>
        <nav class="main-nav">
          <a href="/" class={`nav-link ${isActive('/')}`}>Home</a>
          <a href="/about" class={`nav-link ${isActive('/about')}`}>About Us</a>
          <a href="/services" class={`nav-link ${isActive('/services')}`}>Our Services</a>
          <a href="/work" class={`nav-link ${isActive('/work')}`}>Our Work</a>
          <a href="/coverage" class={`nav-link ${isActive('/coverage')}`}>Area of Coverage</a>
          <a href="/contact" class={`nav-link ${isActive('/contact')}`}>Contact</a>
        </nav>
      </div>
    </header>
    <main class="pt-16">
      <slot />
    </main>
    <Footer />
    {debugEnabled && (
      <div class="fixed bottom-4 right-4 rounded-full bg-[#7f66ff] px-3 py-1 text-xs font-medium text-white shadow-lg">
        concept C Â· {shortCommitSha}
      </div>
    )}

    <style>
      .site-header {
        background: var(--muted);
      }
      .site-header .container {
        margin: 0 auto;
        padding: 1rem clamp(1rem, 4vw, 3rem);
        display: flex;
        align-items: center;
        justify-content: space-between;
        gap: 1.5rem;
      }
      .brand-logo {
        display: block;
      }
      .main-nav {
        display: flex;
        gap: 0.75rem;
        align-items: center;
      }
      .nav-link {
        color: var(--brand);
        text-decoration: none;
        font-weight: 600;
        padding: 0.25rem 0.5rem;
        border-radius: 999px;
      }
      .nav-link:hover {
        color: var(--brand-cta);
      }
      .nav-link.active {
        color: var(--brand-cta);
      }
      @media (max-width: 768px) {
        .site-header .container {
          flex-direction: column;
          align-items: flex-start;
        }
        .main-nav {
          flex-wrap: wrap;
          justify-content: flex-start;
        }
      }
    </style>
  </body>
</html>
